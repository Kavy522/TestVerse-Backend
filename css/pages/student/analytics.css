/* ================================================================
   STUDENT ANALYTICS PAGE — TestVerse
   Theme: White / Light — #f8fafc bg | #ffffff cards | #6366f1 primary
   ================================================================ */

/* ── App Shell ───────────────────────────────────────────────────── */
.dashboard-layout {
    display: flex; min-height: 100vh;
    background: #f8fafc;
    font-family: 'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
    color: #1e293b;
}

/* ── Sidebar ─────────────────────────────────────────────────────── */
.sidebar {
    width: 260px; background: #ffffff;
    border-right: 1px solid #e2e8f0;
    display: flex; flex-direction: column;
    position: fixed; top: 0; left: 0; bottom: 0;
    z-index: 100; transition: transform .3s ease;
}
.sidebar-header { padding: 1.5rem; border-bottom: 1px solid #e2e8f0; }
.logo {
    display: flex; align-items: center; gap: .75rem;
    font-size: 1.25rem; font-weight: 700; color: #6366f1; text-decoration: none;
}
.logo i { font-size: 1.5rem; }
.sidebar-nav { flex: 1; padding: 1rem 0; overflow-y: auto; }
.nav-item {
    display: flex; align-items: center; gap: .75rem;
    padding: .75rem 1.5rem; color: #64748b; text-decoration: none;
    font-weight: 500; font-size: .9375rem; transition: all .2s;
    border: none; background: none; width: 100%;
    text-align: left; cursor: pointer; font-family: inherit;
}
.nav-item:hover  { background: #f8fafc; color: #6366f1; }
.nav-item.active {
    background: linear-gradient(to right,rgba(99,102,241,.1),transparent);
    color: #6366f1; border-right: 3px solid #6366f1; font-weight: 600;
}
.nav-item i { font-size: 1.1rem; width: 20px; text-align: center; }
.sidebar-footer {
    padding: 1rem; border-top: 1px solid #e2e8f0;
    display: flex; flex-direction: column; gap: .5rem;
}
.sidebar-user-card {
    display: flex; align-items: center; gap: .625rem;
    padding: .625rem .75rem; background: #f8fafc;
    border-radius: 10px; border: 1px solid #e2e8f0;
}
.su-avatar { width: 34px; height: 34px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(99,102,241,.25); flex-shrink: 0; }
.su-name   { display: block; font-size: .8125rem; font-weight: 600; color: #1e293b; }
.su-role   { display: block; font-size: .7rem; color: #6366f1; font-weight: 500; }
.logout-btn { color: #ef4444 !important; }
.logout-btn:hover { background: rgba(239,68,68,.06) !important; }
.sidebar-overlay { display: none; position: fixed; inset: 0; background: rgba(15,23,42,.4); z-index: 99; }
.sidebar-overlay.show { display: block; }

/* ── Main Content ────────────────────────────────────────────────── */
.main-content {
    flex: 1; margin-left: 260px; min-height: 100vh;
    display: flex; flex-direction: column; background: #f8fafc;
}

/* ── Topbar ──────────────────────────────────────────────────────── */
.topbar {
    background: #ffffff; border-bottom: 1px solid #e2e8f0;
    padding: 0 2rem; height: 68px;
    display: flex; align-items: center; justify-content: space-between;
    position: sticky; top: 0; z-index: 50; gap: 1rem;
}
.topbar-left  { display: flex; align-items: center; gap: 1rem; }
.topbar-right { display: flex; align-items: center; gap: .875rem; }
.mobile-menu-toggle {
    display: none; background: none; border: none;
    font-size: 1.5rem; color: #64748b; cursor: pointer; padding: .5rem;
}
.page-title    { font-size: 1.125rem; font-weight: 700; color: #1e293b; margin: 0; line-height: 1.2; }
.page-subtitle { font-size: .75rem; color: #94a3b8; font-weight: 500; margin: 0; }
.period-select {
    padding: .4rem .875rem; border: 1px solid #e2e8f0; border-radius: 8px;
    font-size: .8125rem; font-family: inherit; background: #ffffff;
    color: #1e293b; cursor: pointer; outline: none; transition: border-color .2s;
}
.period-select:focus { border-color: #6366f1; }
.icon-btn {
    position: relative; background: none; border: none;
    font-size: 1.125rem; color: #64748b; cursor: pointer;
    padding: .5rem; border-radius: 6px; transition: all .2s;
    display: flex; align-items: center; justify-content: center;
}
.icon-btn:hover { color: #6366f1; background: rgba(99,102,241,.07); }
.notif-badge {
    position: absolute; top: 2px; right: 2px;
    background: #ef4444; color: #fff; font-size: .6rem; font-weight: 700;
    min-width: 16px; height: 16px; border-radius: 9999px;
    display: flex; align-items: center; justify-content: center;
    padding: 0 3px; border: 2px solid #fff;
}
.notif-badge.hidden { display: none; }
.user-menu  { display: flex; align-items: center; gap: .625rem; }
.user-avatar{ width: 36px; height: 36px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(99,102,241,.25); }
.user-name  { font-size: .875rem; font-weight: 600; color: #1e293b; }
.user-role  { font-size: .75rem; color: #64748b; }

/* ── Page Content ────────────────────────────────────────────────── */
.page-content {
    flex: 1; padding: 1.75rem 2rem;
    display: flex; flex-direction: column; gap: 1.25rem;
}

/* ── Shimmer ─────────────────────────────────────────────────────── */
@keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }
@keyframes spin    { to{transform:rotate(360deg)} }
@keyframes fadeIn  { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none} }

.shimmer-card {
    background: linear-gradient(90deg,#e2e8f0 25%,#f1f5f9 50%,#e2e8f0 75%);
    background-size: 200% 100%; animation: shimmer 1.4s infinite;
    border-radius: 12px; min-height: 96px; border: 1px solid #e2e8f0;
}
.chart-loading {
    display: flex; align-items: center; justify-content: center;
    gap: .625rem; padding: 3rem 1rem;
    font-size: .8125rem; color: #94a3b8;
}
.spinner-sm {
    width: 22px; height: 22px;
    border: 2.5px solid #e2e8f0; border-top-color: #6366f1;
    border-radius: 50%; animation: spin .8s linear infinite;
    flex-shrink: 0;
}

/* ══════════════════════════════════════════════════════════════════
   KPI CARDS
════════════════════════════════════════════════════════════════════ */
.kpi-grid {
    display: grid; grid-template-columns: repeat(5,1fr); gap: 1rem;
}
.kpi-card {
    background: #ffffff; border: 1px solid #e2e8f0; border-radius: 14px;
    padding: 1.125rem 1.25rem; display: flex; align-items: center;
    gap: .875rem; transition: all .2s; animation: fadeIn .4s ease both;
}
.kpi-card:hover { box-shadow: 0 4px 14px rgba(15,23,42,.07); transform: translateY(-2px); border-color: rgba(99,102,241,.2); }
.kpi-icon {
    width: 46px; height: 46px; border-radius: 11px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.125rem; flex-shrink: 0;
}
.ki-violet  { background: rgba(99,102,241,.1); color: #6366f1; }
.ki-success { background: rgba(34,197,94,.1);  color: #16a34a; }
.ki-danger  { background: rgba(239,68,68,.1);  color: #dc2626; }
.ki-blue    { background: rgba(59,130,246,.1); color: #2563eb; }
.ki-amber   { background: rgba(245,158,11,.1); color: #d97706; }
.ki-teal    { background: rgba(20,184,166,.1); color: #0d9488; }
.ki-purple  { background: rgba(139,92,246,.1); color: #7c3aed; }
.kpi-body   { display: flex; flex-direction: column; gap: .175rem; min-width: 0; }
.kpi-val    { font-size: 1.625rem; font-weight: 900; color: #1e293b; line-height: 1.1; }
.kpi-lbl    { font-size: .72rem; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: .04em; white-space: nowrap; }
.kpi-delta  { font-size: .72rem; font-weight: 600; margin-top: .15rem; }
.kpi-delta.up   { color: #16a34a; }
.kpi-delta.down { color: #dc2626; }
.kpi-delta i { font-size: .65rem; }

/* ══════════════════════════════════════════════════════════════════
   LAYOUT ROWS
════════════════════════════════════════════════════════════════════ */
.analytics-row {
    display: grid; grid-template-columns: 1fr 340px; gap: 1.25rem;
}
.analytics-row-3 {
    grid-template-columns: repeat(3,1fr);
}

/* ── Generic Analytics Card ──────────────────────────────────────── */
.an-card {
    background: #ffffff; border: 1px solid #e2e8f0;
    border-radius: 14px; padding: 1.375rem 1.5rem;
    display: flex; flex-direction: column; gap: 1rem;
    animation: fadeIn .45s ease both;
}
.an-card-full { /* spans full width when used outside grid */ }
.an-card-header {
    display: flex; align-items: flex-start; justify-content: space-between; gap: 1rem;
}
.an-card-title {
    font-size: .9375rem; font-weight: 700; color: #1e293b;
    display: flex; align-items: center; gap: .45rem; margin: 0;
}
.an-card-title i { color: #6366f1; font-size: .875rem; }
.an-card-sub  { font-size: .75rem; color: #94a3b8; margin: .175rem 0 0; }
.an-card-actions { display: flex; gap: .375rem; flex-shrink: 0; }
.an-tab-btn {
    padding: .25rem .75rem; border-radius: 6px;
    border: 1px solid #e2e8f0; background: #f8fafc;
    font-size: .75rem; font-weight: 600; color: #64748b;
    cursor: pointer; transition: all .15s; font-family: inherit;
}
.an-tab-btn.active { background: #6366f1; border-color: #6366f1; color: #fff; }
.btn-link {
    font-size: .8125rem; font-weight: 600; color: #6366f1;
    text-decoration: none; display: flex; align-items: center; gap: .3rem;
    white-space: nowrap; flex-shrink: 0;
    transition: color .15s;
}
.btn-link:hover { color: #4338ca; }
.btn-link i { font-size: .7rem; }

/* ══════════════════════════════════════════════════════════════════
   TREND CHART  (pure SVG + CSS)
════════════════════════════════════════════════════════════════════ */
.an-chart-wrap { position: relative; min-height: 220px; }
.trend-svg {
    width: 100%; height: 220px; overflow: visible;
    display: block;
}
.trend-line  { fill: none; stroke: #6366f1; stroke-width: 2.5; stroke-linejoin: round; stroke-linecap: round; }
.trend-area  { fill: url(#trendGrad); }
.trend-point {
    fill: #6366f1; stroke: #ffffff; stroke-width: 2; r: 4;
    transition: r .15s;
}
.trend-point:hover { r: 6; cursor: pointer; }
.trend-grid-line { stroke: #f1f5f9; stroke-width: 1; }
.trend-y-label   { font-size: 10px; fill: #94a3b8; font-family: inherit; }

/* Bar mode */
.trend-bar-rect { fill: #6366f1; rx: 4; opacity: .85; transition: opacity .15s; }
.trend-bar-rect:hover { opacity: 1; cursor: pointer; }

.trend-labels {
    display: flex; justify-content: space-between;
    padding: 0 .25rem; margin-top: -.25rem;
}
.trend-label { font-size: .68rem; color: #94a3b8; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 72px; text-align: center; }

/* Tooltip */
.chart-tooltip {
    position: absolute; background: #1e293b; color: #fff;
    padding: .375rem .75rem; border-radius: 8px;
    font-size: .75rem; font-weight: 600; pointer-events: none;
    transform: translate(-50%,-110%); white-space: nowrap;
    box-shadow: 0 4px 12px rgba(15,23,42,.25); z-index: 10;
    transition: opacity .15s;
}
.chart-tooltip::after {
    content: ''; position: absolute; bottom: -5px; left: 50%;
    transform: translateX(-50%); border: 5px solid transparent;
    border-bottom: none; border-top-color: #1e293b;
}
.trend-empty {
    display: flex; flex-direction: column; align-items: center;
    justify-content: center; gap: .5rem; min-height: 180px;
    color: #cbd5e1; font-size: .875rem;
}
.trend-empty i { font-size: 2rem; }

/* ══════════════════════════════════════════════════════════════════
   PASS/FAIL DONUT
════════════════════════════════════════════════════════════════════ */
.donut-wrap {
    display: flex; flex-direction: column; align-items: center; gap: 1rem;
}
.donut-chart { position: relative; display: inline-flex; }
.donut-track { fill: none; stroke: #f1f5f9; stroke-width: 14; }
.donut-seg   {
    fill: none; stroke-width: 14; stroke-linecap: butt;
    transform: rotate(-90deg); transform-origin: 60px 60px;
    transition: stroke-dasharray .7s ease, stroke-dashoffset .7s ease;
}
.donut-seg.pass { stroke: #22c55e; }
.donut-seg.fail { stroke: #ef4444; }
.donut-seg.pend { stroke: #f59e0b; }
.donut-center {
    position: absolute; inset: 0;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
}
.donut-pct   { font-size: 1.375rem; font-weight: 900; color: #1e293b; line-height: 1; }
.donut-label { font-size: .65rem; font-weight: 600; color: #94a3b8; text-transform: uppercase; }
.donut-legend {
    display: flex; flex-direction: column; gap: .5rem; width: 100%;
    padding: 0 .5rem;
}
.dl-item {
    display: flex; align-items: center; justify-content: space-between;
    font-size: .8125rem;
}
.dl-dot {
    width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0;
}
.dl-dot.pass { background: #22c55e; }
.dl-dot.fail { background: #ef4444; }
.dl-dot.pend { background: #f59e0b; }
.dl-name { display: flex; align-items: center; gap: .5rem; color: #64748b; font-weight: 500; }
.dl-val  { font-weight: 700; color: #1e293b; }

/* ══════════════════════════════════════════════════════════════════
   SUBJECT BREAKDOWN BARS
════════════════════════════════════════════════════════════════════ */
.subject-bars { display: flex; flex-direction: column; gap: .75rem; }
.sb-row       { display: flex; flex-direction: column; gap: .3rem; }
.sb-label {
    display: flex; justify-content: space-between; align-items: center;
    font-size: .8125rem; color: #64748b;
}
.sb-label span:last-child { font-weight: 700; color: #1e293b; }
.sb-track { height: 9px; background: #f1f5f9; border-radius: 9999px; overflow: hidden; }
.sb-fill  {
    height: 100%; border-radius: 9999px; width: 0%;
    transition: width .65s ease;
    background: linear-gradient(90deg,#6366f1,#818cf8);
}
.sb-fill.good { background: linear-gradient(90deg,#22c55e,#4ade80); }
.sb-fill.mid  { background: linear-gradient(90deg,#f59e0b,#fbbf24); }
.sb-fill.bad  { background: linear-gradient(90deg,#ef4444,#f87171); }
.sb-meta { display: flex; align-items: center; gap: .375rem; }
.sb-count { font-size: .68rem; color: #94a3b8; }

/* ══════════════════════════════════════════════════════════════════
   TIME BARS
════════════════════════════════════════════════════════════════════ */
.time-bars { display: flex; flex-direction: column; gap: .875rem; overflow-y: auto; max-height: 320px; }
.tb-row    { display: flex; flex-direction: column; gap: .35rem; }
.tb-label  {
    display: flex; justify-content: space-between;
    font-size: .78rem; color: #64748b;
}
.tb-label-name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 180px; }
.tb-label-time { font-weight: 700; color: #1e293b; white-space: nowrap; }
.tb-track      { height: 8px; background: #f1f5f9; border-radius: 9999px; overflow: hidden; position: relative; }
.tb-fill-used  { height: 100%; border-radius: 9999px; transition: width .65s ease; background: #6366f1; }
.tb-fill-total {
    position: absolute; top: 0; height: 100%; width: 100%;
    background: none; border-right: 2px dashed rgba(99,102,241,.35);
}

/* ══════════════════════════════════════════════════════════════════
   EXAM TYPE BREAKDOWN
════════════════════════════════════════════════════════════════════ */
.type-breakdown { display: flex; flex-direction: column; gap: .625rem; }
.et-row {
    display: flex; align-items: center; gap: .75rem;
}
.et-name {
    font-size: .8125rem; color: #64748b; font-weight: 500;
    width: 110px; flex-shrink: 0; white-space: nowrap;
    overflow: hidden; text-overflow: ellipsis;
    text-transform: capitalize;
}
.et-track { flex: 1; height: 8px; background: #f1f5f9; border-radius: 9999px; overflow: hidden; }
.et-fill  { height: 100%; border-radius: 9999px; transition: width .65s ease; }
.et-cnt   { font-size: .78rem; font-weight: 700; color: #1e293b; width: 28px; text-align: right; flex-shrink: 0; }

/* ══════════════════════════════════════════════════════════════════
   BADGES
════════════════════════════════════════════════════════════════════ */
.badge-count-chip {
    background: rgba(99,102,241,.1); color: #6366f1;
    border: 1px solid rgba(99,102,241,.2);
    padding: .15rem .625rem; border-radius: 9999px;
    font-size: .72rem; font-weight: 700;
}
.badges-wrap { display: flex; flex-wrap: wrap; gap: .625rem; }
.badge-item {
    display: flex; flex-direction: column; align-items: center; gap: .25rem;
    background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 10px;
    padding: .75rem .625rem; min-width: 72px; text-align: center;
    transition: all .2s;
}
.badge-item:hover { border-color: #6366f1; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(99,102,241,.12); }
.badge-item i  { font-size: 1.5rem; }
.badge-item .badge-name { font-size: .65rem; font-weight: 600; color: #1e293b; line-height: 1.3; }
.badge-item .badge-desc { font-size: .6rem; color: #94a3b8; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.badge-empty {
    display: flex; flex-direction: column; align-items: center; gap: .5rem;
    padding: 2rem 1rem; text-align: center; width: 100%;
    color: #cbd5e1; font-size: .8125rem;
}
.badge-empty i { font-size: 2rem; }

/* ══════════════════════════════════════════════════════════════════
   POINTS & STREAKS
════════════════════════════════════════════════════════════════════ */
.points-wrap { display: flex; flex-direction: column; gap: .875rem; }
.points-hero {
    display: flex; align-items: center; gap: 1rem;
    background: linear-gradient(135deg,rgba(99,102,241,.08),rgba(139,92,246,.06));
    border: 1px solid rgba(99,102,241,.15); border-radius: 12px;
    padding: 1rem 1.25rem;
}
.ph-icon {
    width: 48px; height: 48px; border-radius: 12px;
    background: linear-gradient(135deg,#6366f1,#8b5cf6);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.25rem; color: #fff; flex-shrink: 0;
}
.ph-body    { display: flex; flex-direction: column; gap: .1rem; }
.ph-val     { font-size: 1.75rem; font-weight: 900; color: #6366f1; line-height: 1.1; }
.ph-label   { font-size: .72rem; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: .04em; }
.streak-row {
    display: flex; align-items: center; gap: .875rem; flex-wrap: wrap;
}
.streak-item {
    flex: 1; min-width: 80px; background: #f8fafc;
    border: 1px solid #e2e8f0; border-radius: 10px;
    padding: .75rem .875rem; display: flex; flex-direction: column; gap: .175rem;
    align-items: center; text-align: center;
}
.streak-val { font-size: 1.25rem; font-weight: 800; color: #1e293b; }
.streak-lbl { font-size: .68rem; font-weight: 600; color: #94a3b8; text-transform: uppercase; letter-spacing: .04em; }
.streak-item.fire .streak-val { color: #f59e0b; }
.points-prog-wrap { display: flex; flex-direction: column; gap: .4rem; }
.pp-labels { display: flex; justify-content: space-between; font-size: .72rem; color: #64748b; }
.pp-track  { height: 8px; background: #f1f5f9; border-radius: 9999px; overflow: hidden; }
.pp-fill   {
    height: 100%; border-radius: 9999px; width: 0%;
    background: linear-gradient(90deg,#6366f1,#a78bfa);
    transition: width .8s ease;
}

/* ══════════════════════════════════════════════════════════════════
   RECENT ATTEMPTS TABLE
════════════════════════════════════════════════════════════════════ */
.attempts-table-wrap { overflow-x: auto; }
.attempts-table {
    width: 100%; border-collapse: collapse; font-size: .8375rem;
    min-width: 640px;
}
.attempts-table thead tr { border-bottom: 2px solid #f1f5f9; }
.attempts-table th {
    padding: .625rem 1rem; text-align: left;
    font-size: .7rem; font-weight: 700; color: #94a3b8;
    text-transform: uppercase; letter-spacing: .05em;
    white-space: nowrap;
}
.attempts-table tbody tr {
    border-bottom: 1px solid #f8fafc; transition: background .15s;
}
.attempts-table tbody tr:hover { background: #fafafa; }
.attempts-table td { padding: .75rem 1rem; color: #1e293b; }
.at-exam-name {
    font-weight: 600; white-space: nowrap; overflow: hidden;
    text-overflow: ellipsis; max-width: 220px; display: block;
}
.at-score-cell { font-weight: 800; }
.at-score-cell.high { color: #16a34a; }
.at-score-cell.mid  { color: #d97706; }
.at-score-cell.low  { color: #dc2626; }
.at-mini-bar {
    display: flex; align-items: center; gap: .5rem;
}
.at-bar-track { flex: 1; height: 5px; background: #f1f5f9; border-radius: 9999px; overflow: hidden; min-width: 60px; }
.at-bar-fill  { height: 100%; border-radius: 9999px; }
.at-badge {
    display: inline-flex; align-items: center; gap: 3px;
    padding: .2rem .6rem; border-radius: 9999px;
    font-size: .7rem; font-weight: 700; white-space: nowrap;
}
.at-badge.pass    { background: rgba(34,197,94,.1);  color: #16a34a;  border: 1px solid rgba(34,197,94,.2); }
.at-badge.fail    { background: rgba(239,68,68,.1);  color: #dc2626;  border: 1px solid rgba(239,68,68,.2); }
.at-badge.pending { background: rgba(245,158,11,.1); color: #d97706;  border: 1px solid rgba(245,158,11,.2); }
.at-type-chip {
    font-size: .7rem; color: #6366f1; background: rgba(99,102,241,.08);
    padding: .15rem .5rem; border-radius: 9999px; font-weight: 600;
    text-transform: capitalize; white-space: nowrap;
}
.at-date { font-size: .78rem; color: #94a3b8; }

/* Empty row */
.at-empty-row td {
    text-align: center; padding: 3rem 1rem;
    color: #94a3b8; font-size: .875rem;
}
.at-empty-row i { font-size: 1.75rem; display: block; margin-bottom: .5rem; color: #e2e8f0; }

/* ── Responsive ──────────────────────────────────────────────────── */
@media (max-width:1280px) {
    .kpi-grid { grid-template-columns: repeat(3,1fr); }
}
@media (max-width:1100px) {
    .analytics-row { grid-template-columns: 1fr; }
    .analytics-row-3 { grid-template-columns: repeat(2,1fr); }
}
@media (max-width:900px) {
    .sidebar { transform: translateX(-100%); }
    .sidebar.open { transform: translateX(0); box-shadow: 4px 0 24px rgba(15,23,42,.12); }
    .main-content { margin-left: 0; }
    .mobile-menu-toggle { display: flex; }
    .kpi-grid { grid-template-columns: repeat(2,1fr); }
}
@media (max-width:768px) {
    .topbar { padding: 0 1rem; }
    .page-content { padding: 1.25rem 1rem; }
    .analytics-row-3 { grid-template-columns: 1fr; }
    .user-name, .user-role { display: none; }
    .period-select { font-size: .75rem; }
}
@media (max-width:480px) {
    .kpi-grid { grid-template-columns: 1fr 1fr; }
}
