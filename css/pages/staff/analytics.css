/* ================================================================
   STAFF ANALYTICS PAGE
   ================================================================ */

/* ── Shell ─────────────────────────────────────────────────────── */
.dashboard-layout { display:flex; min-height:100vh; background:#f8fafc; }

.sidebar {
    width:260px; background:#fff; border-right:1px solid #e2e8f0;
    display:flex; flex-direction:column;
    position:fixed; top:0; left:0; bottom:0; z-index:100;
    transition:transform .3s ease;
}
.sidebar-header {
    padding:1.25rem 1.5rem; border-bottom:1px solid #e2e8f0;
    display:flex; align-items:center; justify-content:space-between;
}
.logo { display:flex; align-items:center; gap:.625rem; font-size:1.25rem; font-weight:700; color:#6366f1; text-decoration:none; }
.logo i { font-size:1.375rem; }
.sidebar-toggle { display:none; background:none; border:none; font-size:1.125rem; color:#64748b; cursor:pointer; padding:.375rem; }
.sidebar-nav { flex:1; padding:1rem 0; overflow-y:auto; }
.nav-item {
    display:flex; align-items:center; gap:.75rem; padding:.7rem 1.5rem;
    color:#64748b; text-decoration:none; font-weight:500; font-size:.9375rem;
    transition:all .2s; border:none; background:none; width:100%; text-align:left; cursor:pointer; font-family:inherit;
}
.nav-item:hover  { background:#f8fafc; color:#6366f1; }
.nav-item.active { background:linear-gradient(to right,rgba(99,102,241,.1),transparent); color:#6366f1; border-right:3px solid #6366f1; font-weight:600; }
.nav-item i { font-size:1.0625rem; width:20px; text-align:center; }
.sidebar-footer { padding:1rem; border-top:1px solid #e2e8f0; }
.user-card { display:flex; align-items:center; gap:.75rem; padding:.75rem; background:#f8fafc; border-radius:8px; margin-bottom:.75rem; }
.user-card-avatar { width:36px; height:36px; border-radius:50%; border:2px solid rgba(99,102,241,.25); object-fit:cover; }
.user-card-name { display:block; font-size:.875rem; font-weight:600; color:#1e293b; }
.user-card-role { display:block; font-size:.725rem; color:#6366f1; }
.logout-btn { color:#ef4444!important; }
.logout-btn:hover { background:rgba(239,68,68,.06)!important; }
.sidebar-overlay { display:none; position:fixed; inset:0; background:rgba(15,23,42,.4); z-index:99; }
.sidebar-overlay.show { display:block; }

.main-content { flex:1; margin-left:260px; min-height:100vh; display:flex; flex-direction:column; }

/* ── Topbar ────────────────────────────────────────────────────── */
.topbar {
    background:#fff; border-bottom:1px solid #e2e8f0;
    padding:0 2rem; height:64px;
    display:flex; align-items:center; justify-content:space-between;
    position:sticky; top:0; z-index:50; gap:1rem;
}
.topbar-left, .topbar-right { display:flex; align-items:center; gap:.875rem; }
.mobile-menu-toggle { display:none; background:none; border:none; font-size:1.5rem; color:#64748b; cursor:pointer; }
.breadcrumb { display:flex; align-items:center; gap:.5rem; }
.breadcrumb-item { font-size:.875rem; color:#64748b; }
.breadcrumb-item.active { font-weight:600; color:#1e293b; }
.breadcrumb-sep { font-size:.625rem; color:#cbd5e1; }

.exam-selector-wrap {
    display:flex; align-items:center; gap:.5rem;
    background:#f8fafc; border:1.5px solid #e2e8f0;
    border-radius:9px; padding:.4rem .875rem;
    transition:border-color .2s;
}
.exam-selector-wrap:focus-within { border-color:#6366f1; }
.exam-selector-icon { color:#6366f1; font-size:.875rem; }
.exam-selector {
    border:none; outline:none; background:transparent;
    font-size:.875rem; color:#1e293b; font-family:inherit;
    cursor:pointer; max-width:260px;
}

.user-menu { display:flex; align-items:center; gap:.625rem; }
.user-avatar { width:36px; height:36px; border-radius:50%; border:2px solid rgba(99,102,241,.2); object-fit:cover; }
.user-info .user-name { font-weight:600; color:#1e293b; font-size:.875rem; }
.user-info .user-role  { font-size:.75rem; color:#64748b; }

/* ── Page Content ──────────────────────────────────────────────── */
.page-content { flex:1; padding:1.75rem 2rem; display:flex; flex-direction:column; gap:1.5rem; }

/* ── Alert ─────────────────────────────────────────────────────── */
.alert { padding:.875rem 1rem; border-radius:8px; font-size:.9rem; font-weight:500; display:flex; align-items:flex-start; gap:.625rem; }
.alert-error   { background:#fef2f2; border:1px solid #fecaca; color:#b91c1c; }
.alert-success { background:#f0fdf4; border:1px solid #bbf7d0; color:#166534; }
.alert-info    { background:#eff6ff; border:1px solid #bfdbfe; color:#1d4ed8; }

/* ── Buttons ───────────────────────────────────────────────────── */
.btn {
    display:inline-flex; align-items:center; gap:.5rem;
    padding:.625rem 1.25rem; border-radius:8px;
    font-size:.9375rem; font-weight:600; cursor:pointer; border:none;
    transition:all .2s; white-space:nowrap; font-family:inherit;
}
.btn-sm { padding:.4rem .875rem; font-size:.8375rem; }
.btn-outline { background:#fff; color:#64748b; border:1.5px solid #e2e8f0; }
.btn-outline:hover { border-color:#6366f1; color:#6366f1; }

/* ── Page Header ───────────────────────────────────────────────── */
.page-header { display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:1rem; }
.page-title { font-size:1.5rem; font-weight:700; color:#1e293b; margin:0 0 .25rem; display:flex; align-items:center; gap:.625rem; }
.page-title i { color:#6366f1; }
.page-subtitle { font-size:.9rem; color:#64748b; margin:0; }

/* ── Page Loading ──────────────────────────────────────────────── */
.page-loading {
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    gap:1rem; padding:5rem 2rem; color:#64748b; font-size:.9375rem;
}
.spinner {
    width:40px; height:40px;
    border:3px solid #e2e8f0; border-top-color:#6366f1;
    border-radius:50%; animation:spin .8s linear infinite;
}
@keyframes spin { to { transform:rotate(360deg); } }
.spinner-sm { width:20px; height:20px; border-width:2.5px; }
.inline-loading { display:flex; align-items:center; gap:.625rem; padding:1.5rem; color:#64748b; font-size:.875rem; }

/* ── KPI Grid ──────────────────────────────────────────────────── */
.kpi-grid {
    display:grid;
    grid-template-columns:repeat(6,1fr);
    gap:.875rem;
}
.kpi-card {
    background:#fff; border:1px solid #e2e8f0; border-radius:12px;
    padding:1rem 1.125rem; display:flex; align-items:center; gap:.875rem;
    transition:box-shadow .2s, transform .2s;
}
.kpi-card:hover { box-shadow:0 4px 20px rgba(99,102,241,.08); transform:translateY(-2px); }
.kpi-icon {
    width:44px; height:44px; border-radius:10px;
    display:flex; align-items:center; justify-content:center;
    font-size:1.125rem; flex-shrink:0;
}
.kpi-icon.indigo { background:rgba(99,102,241,.12); color:#6366f1; }
.kpi-icon.blue   { background:rgba(59,130,246,.12);  color:#3b82f6; }
.kpi-icon.green  { background:rgba(16,185,129,.12);  color:#059669; }
.kpi-icon.amber  { background:rgba(245,158,11,.12);  color:#d97706; }
.kpi-icon.red    { background:rgba(239,68,68,.12);   color:#dc2626; }
.kpi-icon.purple { background:rgba(168,85,247,.12);  color:#9333ea; }
.kpi-body { display:flex; flex-direction:column; gap:.1rem; }
.kpi-val { font-size:1.5rem; font-weight:800; color:#1e293b; line-height:1.1; }
.kpi-lbl { font-size:.7rem; font-weight:700; color:#94a3b8; text-transform:uppercase; letter-spacing:.05em; }

/* ── Chart Layout ──────────────────────────────────────────────── */
.charts-row { display:grid; gap:1.25rem; }
.charts-row.two-col { grid-template-columns:1fr 1fr; }
.charts-row.one-col { grid-template-columns:1fr; }

.chart-card {
    background:#fff; border:1px solid #e2e8f0; border-radius:14px;
    overflow:hidden; display:flex; flex-direction:column;
}
.chart-card-header {
    display:flex; align-items:center; justify-content:space-between;
    padding:1rem 1.375rem; border-bottom:1px solid #f1f5f9;
    background:#fafbff; flex-wrap:wrap; gap:.5rem;
}
.chart-card-title {
    font-size:.9375rem; font-weight:700; color:#1e293b;
    display:flex; align-items:center; gap:.5rem;
}
.chart-card-title i { color:#6366f1; font-size:.875rem; }
.chart-hint { font-size:.78rem; color:#94a3b8; }
.chart-footer { padding:.75rem 1.375rem; border-top:1px solid #f1f5f9; background:#fafbff; }

.chart-wrap {
    flex:1; padding:1.25rem; position:relative;
    min-height:260px; display:flex; align-items:center; justify-content:center;
}
.chart-wrap canvas { max-width:100%; }
.chart-wrap-sm { min-height:220px; }

/* Chart tabs */
.chart-tabs { display:flex; gap:.25rem; }
.ctab {
    padding:.25rem .75rem; border-radius:9999px; font-size:.78rem; font-weight:600;
    border:1.5px solid #e2e8f0; background:#fff; color:#64748b; cursor:pointer; font-family:inherit; transition:all .2s;
}
.ctab:hover  { border-color:#6366f1; color:#6366f1; }
.ctab.active { background:#6366f1; color:#fff; border-color:#6366f1; }

/* Chart legend */
.chart-legend { display:flex; align-items:center; gap:.875rem; flex-wrap:wrap; }
.legend-item  { display:flex; align-items:center; gap:.35rem; font-size:.78rem; font-weight:600; color:#475569; }
.legend-dot   { width:10px; height:10px; border-radius:50%; flex-shrink:0; }

/* ── Section Divider ───────────────────────────────────────────── */
.section-divider {
    display:flex; align-items:center; gap:.875rem;
    font-size:.8rem; font-weight:700; color:#94a3b8;
    text-transform:uppercase; letter-spacing:.07em;
}
.section-divider::before,
.section-divider::after { content:''; flex:1; height:1px; background:#e2e8f0; }

/* ── Comparison Table ──────────────────────────────────────────── */
.comp-search {
    padding:.4rem .875rem; border:1.5px solid #e2e8f0; border-radius:8px;
    font-size:.875rem; color:#1e293b; outline:none; font-family:inherit;
    background:#f8fafc; transition:border-color .2s, box-shadow .2s; width:200px;
}
.comp-search:focus { border-color:#6366f1; box-shadow:0 0 0 3px rgba(99,102,241,.08); background:#fff; }

.comp-table-wrap { overflow-x:auto; }
.comp-table { width:100%; border-collapse:collapse; }
.comp-table thead tr { background:#f8fafc; border-bottom:2px solid #e2e8f0; }
.comp-table th {
    padding:.65rem 1rem; text-align:left;
    font-size:.7rem; font-weight:700; color:#64748b;
    text-transform:uppercase; letter-spacing:.05em; white-space:nowrap;
}
.comp-table tbody tr { border-bottom:1px solid #f1f5f9; transition:background .15s; }
.comp-table tbody tr:last-child { border-bottom:none; }
.comp-table tbody tr:hover { background:#fafbff; }
.comp-table td { padding:.75rem 1rem; font-size:.875rem; color:#475569; vertical-align:middle; }

/* Inline score bar in table */
.inline-bar { display:flex; align-items:center; gap:.625rem; }
.inline-bar-track { flex:1; height:6px; background:#f1f5f9; border-radius:9999px; overflow:hidden; min-width:80px; }
.inline-bar-fill  { height:100%; border-radius:9999px; transition:width .4s; }
.inline-bar-fill.pass { background:linear-gradient(to right,#6366f1,#22c55e); }
.inline-bar-fill.fail { background:linear-gradient(to right,#f59e0b,#ef4444); }
.inline-bar-pct { font-size:.78rem; font-weight:700; color:#64748b; white-space:nowrap; }

/* Status badges */
.s-badge {
    display:inline-flex; align-items:center; gap:.275rem;
    padding:.2rem .6rem; border-radius:9999px;
    font-size:.7rem; font-weight:700; text-transform:uppercase; letter-spacing:.04em;
}
.s-badge.pass    { background:rgba(16,185,129,.1);  color:#059669; border:1px solid rgba(16,185,129,.2); }
.s-badge.fail    { background:rgba(239,68,68,.1);   color:#dc2626; border:1px solid rgba(239,68,68,.2); }
.s-badge.pending { background:rgba(245,158,11,.1);  color:#d97706; border:1px solid rgba(245,158,11,.2); }
.g-badge.fully_graded     { background:rgba(16,185,129,.1);  color:#059669; font-size:.7rem; font-weight:700; padding:.2rem .6rem; border-radius:9999px; border:1px solid rgba(16,185,129,.2); }
.g-badge.partially_graded { background:rgba(245,158,11,.1);  color:#d97706; font-size:.7rem; font-weight:700; padding:.2rem .6rem; border-radius:9999px; border:1px solid rgba(245,158,11,.2); }
.g-badge.pending           { background:#f8fafc; color:#94a3b8; font-size:.7rem; font-weight:700; padding:.2rem .6rem; border-radius:9999px; border:1px solid #e2e8f0; }

/* ── Leaderboard ───────────────────────────────────────────────── */
.leaderboard-list { padding:.75rem 1.25rem 1.25rem; display:flex; flex-direction:column; gap:.5rem; }
.lb-row {
    display:flex; align-items:center; gap:.875rem;
    padding:.75rem 1rem; border-radius:10px;
    border:1px solid #f1f5f9; background:#fafbff;
    transition:all .2s;
}
.lb-row:hover { border-color:rgba(99,102,241,.2); background:#fff; box-shadow:0 2px 12px rgba(99,102,241,.06); }
.lb-row.gold   { border-color:rgba(251,191,36,.3); background:rgba(254,249,195,.3); }
.lb-row.silver { border-color:rgba(148,163,184,.3); background:rgba(248,250,252,.5); }
.lb-row.bronze { border-color:rgba(180,124,88,.2);  background:rgba(255,247,237,.3); }

.lb-rank {
    font-size:1.0625rem; font-weight:800; color:#94a3b8;
    width:28px; text-align:center; flex-shrink:0;
}
.lb-rank.gold   { color:#d97706; }
.lb-rank.silver { color:#64748b; }
.lb-rank.bronze { color:#b45309; }
.lb-rank-medal  { font-size:1.125rem; }

.lb-avatar { width:36px; height:36px; border-radius:50%; border:2px solid rgba(99,102,241,.2); object-fit:cover; flex-shrink:0; }
.lb-info   { flex:1; min-width:0; }
.lb-name   { font-weight:600; color:#1e293b; font-size:.9rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.lb-dept   { font-size:.75rem; color:#94a3b8; }
.lb-points { font-size:1.0625rem; font-weight:800; color:#6366f1; white-space:nowrap; }
.lb-points-lbl { font-size:.7rem; font-weight:600; color:#94a3b8; display:block; text-align:right; }

/* ── Responsive ────────────────────────────────────────────────── */
@media (max-width:1280px) { .kpi-grid { grid-template-columns:repeat(3,1fr); } }
@media (max-width:1024px) {
    .charts-row.two-col { grid-template-columns:1fr; }
    .kpi-grid { grid-template-columns:repeat(3,1fr); }
}
@media (max-width:900px) {
    .sidebar { transform:translateX(-100%); }
    .sidebar.open { transform:translateX(0); box-shadow:4px 0 24px rgba(15,23,42,.12); }
    .main-content { margin-left:0; }
    .mobile-menu-toggle { display:flex; }
    .sidebar-toggle { display:flex; align-items:center; justify-content:center; }
}
@media (max-width:768px) {
    .topbar { padding:0 1rem; flex-wrap:wrap; height:auto; padding-top:.75rem; padding-bottom:.75rem; }
    .page-content { padding:1.25rem 1rem; }
    .kpi-grid { grid-template-columns:repeat(2,1fr); }
    .exam-selector { max-width:160px; }
    .user-info { display:none; }
    .comp-search { width:140px; }
}
@media (max-width:480px) {
    .kpi-grid { grid-template-columns:1fr 1fr; }
}
